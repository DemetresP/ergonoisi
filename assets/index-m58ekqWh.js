import{r as i,j as e,d as zt}from"./react-vendor-C33-UNEI.js";import{t as Lt,g as Ne,i as Vt,e as Bt,G as Ut,j as qt,k as Kt,m as Ht,S as Wt,n as ue}from"./vendor-DiKVLiED.js";import{Q as Qt,u as Ce,s as Yt,e as Gt,a as Jt,b as Xt,c as Zt,f as xe,d as es,g as ts,i as ss,h as G,p as ee,j as te,k as as}from"./data-vendor-BKx7Rwjw.js";import{c as rs,V as Ee,R as Ae,A as Re,C as _e,X as Pe,T as Fe,D as Me,a as ce,P as is,b as Oe,d as ns,S as os,e as q,U as ds,f as ls,g as $e,I as ze,F as Le,h as Ve,i as Be,j as Ue,k as cs,l as qe,m as Ke,n as He,o as We,p as Qe,q as Ye,r as ms,L as Ge,s as Je,t as us,u as xs,v as Xe,w as Ze,x as hs,y as et,z as tt,B as ps,E as st,G as fs,H as at,J as gs,K as rt,M as it,N as vs,O as js,Q as nt,W as ys,Y as bs,Z as Y,_ as Ns,$ as ws,a0 as Ts,a1 as we,a2 as Ds,a3 as Ss,a4 as ot,a5 as dt,a6 as ks,a7 as lt,a8 as ct,a9 as Is,aa as Cs,ab as Es,ac as Te,ad as De,ae as As,af as Se,ag as Rs,ah as _s,ai as Ps,aj as Fs,ak as Ms}from"./ui-vendor-B4eIUP8o.js";import{u as se,w as Os,r as $s}from"./xlsx-uoQkVabA.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))r(n);new MutationObserver(n=>{for(const u of n)if(u.type==="childList")for(const h of u.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&r(h)}).observe(document,{childList:!0,subtree:!0});function a(n){const u={};return n.integrity&&(u.integrity=n.integrity),n.referrerPolicy&&(u.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?u.credentials="include":n.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function r(n){if(n.ep)return;n.ep=!0;const u=a(n);fetch(n.href,u)}})();function zs(){try{return localStorage.getItem("firebaseIdToken")}catch{return null}}function mt(){const t=zs();return t?{Authorization:`Bearer ${t}`}:{}}async function ut(t){if(!t.ok){const s=await t.text()||t.statusText;throw new Error(`${t.status}: ${s}`)}}async function ae(t,s,a){const r=await fetch(s,{method:t,headers:{...a?{"Content-Type":"application/json"}:{},...mt()},body:a?JSON.stringify(a):void 0,credentials:"include"});return await ut(r),r}const xt=({on401:t})=>async({queryKey:s})=>{const a=await fetch(s.join("/"),{headers:{...mt()},credentials:"include"});return t==="returnNull"&&a.status===401?null:(await ut(a),await a.json())},_=new Qt({defaultOptions:{queries:{queryFn:xt({on401:"throw"}),refetchInterval:3e4,refetchOnWindowFocus:!0,staleTime:1e4,retry:!1},mutations:{retry:!1}}}),Ls=1,Vs=1e6;let he=0;function Bs(){return he=(he+1)%Number.MAX_SAFE_INTEGER,he.toString()}const pe=new Map,ke=t=>{if(pe.has(t))return;const s=setTimeout(()=>{pe.delete(t),J({type:"REMOVE_TOAST",toastId:t})},Vs);pe.set(t,s)},Us=(t,s)=>{switch(s.type){case"ADD_TOAST":return{...t,toasts:[s.toast,...t.toasts].slice(0,Ls)};case"UPDATE_TOAST":return{...t,toasts:t.toasts.map(a=>a.id===s.toast.id?{...a,...s.toast}:a)};case"DISMISS_TOAST":{const{toastId:a}=s;return a?ke(a):t.toasts.forEach(r=>{ke(r.id)}),{...t,toasts:t.toasts.map(r=>r.id===a||a===void 0?{...r,open:!1}:r)}}case"REMOVE_TOAST":return s.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(a=>a.id!==s.toastId)}}},ie=[];let ne={toasts:[]};function J(t){ne=Us(ne,t),ie.forEach(s=>{s(ne)})}function qs({...t}){const s=Bs(),a=n=>J({type:"UPDATE_TOAST",toast:{...n,id:s}}),r=()=>J({type:"DISMISS_TOAST",toastId:s});return J({type:"ADD_TOAST",toast:{...t,id:s,open:!0,onOpenChange:n=>{n||r()}}}),{id:s,dismiss:r,update:a}}function ve(){const[t,s]=i.useState(ne);return i.useEffect(()=>(ie.push(s),()=>{const a=ie.indexOf(s);a>-1&&ie.splice(a,1)}),[t]),{...t,toast:qs,dismiss:a=>J({type:"DISMISS_TOAST",toastId:a})}}function l(...t){return Lt(rs(t))}const Ks=is,ht=i.forwardRef(({className:t,...s},a)=>e.jsx(Ee,{ref:a,className:l("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",t),...s}));ht.displayName=Ee.displayName;const Hs=ce("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),pt=i.forwardRef(({className:t,variant:s,...a},r)=>e.jsx(Ae,{ref:r,className:l(Hs({variant:s}),t),...a}));pt.displayName=Ae.displayName;const Ws=i.forwardRef(({className:t,...s},a)=>e.jsx(Re,{ref:a,className:l("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",t),...s}));Ws.displayName=Re.displayName;const ft=i.forwardRef(({className:t,...s},a)=>e.jsx(_e,{ref:a,className:l("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",t),"toast-close":"",...s,children:e.jsx(Pe,{className:"h-4 w-4"})}));ft.displayName=_e.displayName;const gt=i.forwardRef(({className:t,...s},a)=>e.jsx(Fe,{ref:a,className:l("text-sm font-semibold",t),...s}));gt.displayName=Fe.displayName;const vt=i.forwardRef(({className:t,...s},a)=>e.jsx(Me,{ref:a,className:l("text-sm opacity-90",t),...s}));vt.displayName=Me.displayName;function Qs(){const{toasts:t}=ve();return e.jsxs(Ks,{children:[t.map(function({id:s,title:a,description:r,action:n,...u}){return e.jsxs(pt,{...u,children:[e.jsxs("div",{className:"grid gap-1",children:[a&&e.jsx(gt,{children:a}),r&&e.jsx(vt,{children:r})]}),n,e.jsx(ft,{})]},s)}),e.jsx(ht,{})]})}const Ys=ns,Gs=i.forwardRef(({className:t,sideOffset:s=4,...a},r)=>e.jsx(Oe,{ref:r,sideOffset:s,className:l("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-tooltip-content-transform-origin]",t),...a}));Gs.displayName=Oe.displayName;function jt(){const{data:t,isLoading:s,isError:a}=Ce({queryKey:["/api/auth/user"],queryFn:xt({on401:"returnNull"}),retry:!1,staleTime:3e4});return{user:t??void 0,isLoading:s,isAuthenticated:!!t,isError:a}}const Js=ce("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0 hover-elevate active-elevate-2",{variants:{variant:{default:"bg-primary text-primary-foreground border border-primary-border",destructive:"bg-destructive text-destructive-foreground border border-destructive-border",outline:" border [border-color:var(--button-outline)]  shadow-xs active:shadow-none ",secondary:"border bg-secondary text-secondary-foreground border border-secondary-border ",ghost:"border border-transparent"},size:{default:"min-h-9 px-4 py-2",sm:"min-h-8 rounded-md px-3 text-xs",lg:"min-h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),N=i.forwardRef(({className:t,variant:s,size:a,asChild:r=!1,...n},u)=>{const h=r?os:"button";return e.jsx(h,{className:l(Js({variant:s,size:a,className:t})),ref:u,...n})});N.displayName="Button";const O=i.forwardRef(({className:t,...s},a)=>e.jsx("div",{ref:a,className:l("shadcn-card rounded-xl border bg-card border-card-border text-card-foreground shadow-sm",t),...s}));O.displayName="Card";const oe=i.forwardRef(({className:t,...s},a)=>e.jsx("div",{ref:a,className:l("flex flex-col space-y-1.5 p-6",t),...s}));oe.displayName="CardHeader";const de=i.forwardRef(({className:t,...s},a)=>e.jsx("div",{ref:a,className:l("text-2xl font-semibold leading-none tracking-tight",t),...s}));de.displayName="CardTitle";const Xs=i.forwardRef(({className:t,...s},a)=>e.jsx("div",{ref:a,className:l("text-sm text-muted-foreground",t),...s}));Xs.displayName="CardDescription";const $=i.forwardRef(({className:t,...s},a)=>e.jsx("div",{ref:a,className:l("p-6 pt-0",t),...s}));$.displayName="CardContent";const Zs=i.forwardRef(({className:t,...s},a)=>e.jsx("div",{ref:a,className:l("flex items-center p-6 pt-0",t),...s}));Zs.displayName="CardFooter";const je={apiKey:void 0,authDomain:void 0,projectId:void 0,storageBucket:void 0,messagingSenderId:void 0,appId:void 0};function ea(){return[{key:"apiKey",env:"VITE_FIREBASE_API_KEY"},{key:"authDomain",env:"VITE_FIREBASE_AUTH_DOMAIN"},{key:"projectId",env:"VITE_FIREBASE_PROJECT_ID"},{key:"appId",env:"VITE_FIREBASE_APP_ID"}].every(({key:s})=>!!je[s])}function ta(){const t=[{key:"apiKey",env:"VITE_FIREBASE_API_KEY"},{key:"authDomain",env:"VITE_FIREBASE_AUTH_DOMAIN"},{key:"projectId",env:"VITE_FIREBASE_PROJECT_ID"},{key:"appId",env:"VITE_FIREBASE_APP_ID"}];for(const{key:s,env:a}of t)je[s]||console.warn(`[firebase] Missing ${a}`)}const Q=ea();Q||ta();const Ie=Q?Ne().length?Ne()[0]:Vt(je):null,K=Ie?Bt(Ie):null,X=K?new Ut:null;X==null||X.setCustomParameters({prompt:"select_account"});const ye="firebaseIdToken";function yt(){try{localStorage.removeItem(ye)}catch{}}async function sa(){if(!Q||!K||!X)throw new Error("Firebase is not configured. Missing VITE_FIREBASE_* env vars.");const s=await(await Kt(K,X)).user.getIdToken(!0);try{localStorage.setItem(ye,s)}catch{}}async function aa(){K&&await Ht(K),yt()}function ra(t){return K?qt(K,async s=>{if(!s){yt(),t==null||t();return}const a=await s.getIdToken();try{localStorage.setItem(ye,a)}catch{}t==null||t()}):()=>{}}function ia(){const{toast:t}=ve(),[s,a]=i.useState(!1),r=async()=>{try{if(!Q){t({title:"Firebase not configured",description:"Missing VITE_FIREBASE_* env vars. Check Render Environment and redeploy.",variant:"destructive"});return}a(!0),await sa(),await _.invalidateQueries({queryKey:["/api/auth/user"]})}catch(n){t({title:"Login failed",description:(n==null?void 0:n.message)||"Could not sign in with Google.",variant:"destructive"})}finally{a(!1)}};return e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsx("header",{className:"border-b",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-6 md:px-8 h-16 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-8 h-8 bg-primary rounded-md flex items-center justify-center",children:e.jsx(q,{className:"w-5 h-5 text-primary-foreground"})}),e.jsx("h1",{className:"text-xl font-bold tracking-tight",children:"athenai.gr"})]}),e.jsx(N,{onClick:r,disabled:s||!Q,"data-testid":"button-login",children:s?"Connecting...":"Log In with Google"})]})}),e.jsx("main",{children:e.jsx("section",{className:"py-16 md:py-24",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-6 md:px-8",children:[e.jsxs("div",{className:"max-w-3xl mx-auto text-center",children:[e.jsxs("h2",{className:"text-4xl md:text-5xl font-bold tracking-tight mb-6",children:["Προγραμματισμός παραγωγής,"," ",e.jsx("span",{className:"text-primary",children:"απλά και αποτελεσματικά"})]}),e.jsx("p",{className:"text-lg text-muted-foreground mb-8 leading-relaxed",children:"Οργάνωσε τις εργασίες βίντεο, παρακολούθησε τον φόρτο της ομάδας και μην χάνεις ποτέ προθεσμία. Δημιουργήθηκε για δημιουργικές ομάδες που χρειάζονται σαφήνεια και ταχύτητα."}),e.jsx(N,{size:"lg",onClick:r,disabled:s||!Q,"data-testid":"button-get-started",children:s?"Connecting...":"Get Started (Google)"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mt-16",children:[e.jsx(O,{children:e.jsxs($,{className:"p-6",children:[e.jsx("div",{className:"w-12 h-12 bg-primary/10 rounded-lg flex items-center justify-center mb-4",children:e.jsx(q,{className:"w-6 h-6 text-primary"})}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Παρακολούθησε προθεσμίες"}),e.jsx("p",{className:"text-sm text-muted-foreground leading-relaxed",children:"Διαχειρίσου ημερομηνίες παραγωγής και παράδοσης με οπτικές ενδείξεις προτεραιότητας και ειδοποιήσεις για καθυστερήσεις."})]})}),e.jsx(O,{children:e.jsxs($,{className:"p-6",children:[e.jsx("div",{className:"w-12 h-12 bg-primary/10 rounded-lg flex items-center justify-center mb-4",children:e.jsx(ds,{className:"w-6 h-6 text-primary"})}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Εργασίες Ομάδας"}),e.jsx("p",{className:"text-sm text-muted-foreground leading-relaxed",children:"Δες με μια ματιά ποιος εργάζεται σε τι, τις εκτιμώμενες ώρες και εντόπισε τα πιθανά σημεία συμφόρησης πριν εμφανιστούν."})]})}),e.jsx(O,{children:e.jsxs($,{className:"p-6",children:[e.jsx("div",{className:"w-12 h-12 bg-primary/10 rounded-lg flex items-center justify-center mb-4",children:e.jsx(ls,{className:"w-6 h-6 text-primary"})}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Μείνε οργανωμένος"}),e.jsx("p",{className:"text-sm text-muted-foreground leading-relaxed",children:"Εξήγαγε και εισήγαγε δεδομένα έργων, παρακολούθησε ενημερώσεις κατάστασης και κράτα την παραγωγή σου στο σωστό χρονοδιάγραμμα."})]})})]})]})})}),e.jsx("footer",{className:"border-t py-8",children:e.jsx("div",{className:"max-w-7xl mx-auto px-6 md:px-8 text-center text-sm text-muted-foreground",children:e.jsx("p",{children:"athenai.gr - Professional task scheduling for video production"})})})]})}const bt=i.forwardRef(({className:t,...s},a)=>e.jsx($e,{ref:a,className:l(`
      after:content-[''] after:block after:absolute after:inset-0 after:rounded-full after:pointer-events-none after:border after:border-black/10 dark:after:border-white/10
      relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full`,t),...s}));bt.displayName=$e.displayName;const Nt=i.forwardRef(({className:t,...s},a)=>e.jsx(ze,{ref:a,className:l("aspect-square h-full w-full",t),...s}));Nt.displayName=ze.displayName;const wt=i.forwardRef(({className:t,...s},a)=>e.jsx(Le,{ref:a,className:l("flex h-full w-full items-center justify-center rounded-full bg-muted",t),...s}));wt.displayName=Le.displayName;const me=i.forwardRef(({className:t,...s},a)=>e.jsx("textarea",{className:l("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:a,...s}));me.displayName="Textarea";const na=us,oa=xs,da=i.forwardRef(({className:t,inset:s,children:a,...r},n)=>e.jsxs(Ve,{ref:n,className:l("flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",s&&"pl-8",t),...r,children:[a,e.jsx(Be,{className:"ml-auto"})]}));da.displayName=Ve.displayName;const la=i.forwardRef(({className:t,...s},a)=>e.jsx(Ue,{ref:a,className:l("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]",t),...s}));la.displayName=Ue.displayName;const Tt=i.forwardRef(({className:t,sideOffset:s=4,...a},r)=>e.jsx(cs,{children:e.jsx(qe,{ref:r,sideOffset:s,className:l("z-50 max-h-[var(--radix-dropdown-menu-content-available-height)] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]",t),...a})}));Tt.displayName=qe.displayName;const Dt=i.forwardRef(({className:t,inset:s,...a},r)=>e.jsx(Ke,{ref:r,className:l("relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",s&&"pl-8",t),...a}));Dt.displayName=Ke.displayName;const ca=i.forwardRef(({className:t,children:s,checked:a,...r},n)=>e.jsxs(He,{ref:n,className:l("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),checked:a,...r,children:[e.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsx(We,{children:e.jsx(Qe,{className:"h-4 w-4"})})}),s]}));ca.displayName=He.displayName;const ma=i.forwardRef(({className:t,children:s,...a},r)=>e.jsxs(Ye,{ref:r,className:l("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...a,children:[e.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsx(We,{children:e.jsx(ms,{className:"h-2 w-2 fill-current"})})}),s]}));ma.displayName=Ye.displayName;const St=i.forwardRef(({className:t,inset:s,...a},r)=>e.jsx(Ge,{ref:r,className:l("px-2 py-1.5 text-sm font-semibold",s&&"pl-8",t),...a}));St.displayName=Ge.displayName;const kt=i.forwardRef(({className:t,...s},a)=>e.jsx(Je,{ref:a,className:l("-mx-1 my-1 h-px bg-muted",t),...s}));kt.displayName=Je.displayName;const E=i.forwardRef(({className:t,type:s,...a},r)=>e.jsx("input",{type:s,className:l("flex h-9 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:r,...a}));E.displayName="Input";const ua=ce("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),b=i.forwardRef(({className:t,...s},a)=>e.jsx(Xe,{ref:a,className:l(ua(),t),...s}));b.displayName=Xe.displayName;const B=ys,U=bs,z=i.forwardRef(({className:t,children:s,...a},r)=>e.jsxs(Ze,{ref:r,className:l("flex h-9 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t),...a,children:[s,e.jsx(hs,{asChild:!0,children:e.jsx(et,{className:"h-4 w-4 opacity-50"})})]}));z.displayName=Ze.displayName;const It=i.forwardRef(({className:t,...s},a)=>e.jsx(tt,{ref:a,className:l("flex cursor-default items-center justify-center py-1",t),...s,children:e.jsx(ps,{className:"h-4 w-4"})}));It.displayName=tt.displayName;const Ct=i.forwardRef(({className:t,...s},a)=>e.jsx(st,{ref:a,className:l("flex cursor-default items-center justify-center py-1",t),...s,children:e.jsx(et,{className:"h-4 w-4"})}));Ct.displayName=st.displayName;const L=i.forwardRef(({className:t,children:s,position:a="popper",...r},n)=>e.jsx(fs,{children:e.jsxs(at,{ref:n,className:l("relative z-50 max-h-[--radix-select-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-select-content-transform-origin]",a==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:a,...r,children:[e.jsx(It,{}),e.jsx(gs,{className:l("p-1",a==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:s}),e.jsx(Ct,{})]})}));L.displayName=at.displayName;const xa=i.forwardRef(({className:t,...s},a)=>e.jsx(rt,{ref:a,className:l("py-1.5 pl-8 pr-2 text-sm font-semibold",t),...s}));xa.displayName=rt.displayName;const P=i.forwardRef(({className:t,children:s,...a},r)=>e.jsxs(it,{ref:r,className:l("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...a,children:[e.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsx(vs,{children:e.jsx(Qe,{className:"h-4 w-4"})})}),e.jsx(js,{children:s})]}));P.displayName=it.displayName;const ha=i.forwardRef(({className:t,...s},a)=>e.jsx(nt,{ref:a,className:l("-mx-1 my-1 h-px bg-muted",t),...s}));ha.displayName=nt.displayName;const pa="filmwire@gmail.com";function be(t){return t===pa}const fe=["Δημήτρης","Γιάννης","Βασιλική"],fa=["newsit","tlife","zappit"],ga=[{value:"shoot",label:"Γύρισμα"},{value:"edit",label:"Μοντάζ"},{value:"upload",label:"Φόρτωμα"}];function va({onSubmit:t,isPending:s,userEmail:a}){const r=be(a),[n,u]=i.useState(""),[h,k]=i.useState(""),[w,S]=i.useState(""),[C,x]=i.useState(""),[j,o]=i.useState(""),[f,D]=i.useState(""),[g,T]=i.useState(r?fe[0]:""),[I,F]=i.useState("shoot"),[V,d]=i.useState("tlife"),y=m=>{m.preventDefault();const v={title:n,shootDate:h,notes:f,workType:I,tag:V};r&&(v.assignee=g,v.shootTime=w,v.deliveryDate=C,v.deliveryTime=j),t(v),u(""),k(""),S(""),x(""),o(""),D(""),T(r?fe[0]:""),F("shoot"),d("tlife")};return e.jsx(O,{children:e.jsx($,{className:"p-6",children:e.jsx("form",{onSubmit:y,children:e.jsxs("div",{className:"grid gap-6",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(b,{htmlFor:"title",className:"text-sm font-semibold",children:"Project Title"}),e.jsx(E,{id:"title",placeholder:"e.g., Shoot with Tasos",value:n,onChange:m=>u(m.target.value),required:!0,"data-testid":"input-title",className:"h-10"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsxs(b,{htmlFor:"shootDate",className:"text-sm font-semibold",children:[e.jsx(q,{className:"w-4 h-4 inline mr-1.5 -mt-0.5"}),"Production Date"]}),e.jsx(E,{id:"shootDate",type:"date",value:h,onChange:m=>k(m.target.value),"data-testid":"input-shoot-date",className:"h-10 font-mono text-sm"})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsxs(b,{htmlFor:"shootTime",className:"text-sm font-semibold",children:[e.jsx(Y,{className:"w-4 h-4 inline mr-1.5 -mt-0.5"}),"Production Time ",!r&&e.jsx("span",{className:"text-xs text-muted-foreground",children:"(Admin only)"})]}),e.jsx(E,{id:"shootTime",type:"text",placeholder:"HH:MM (e.g., 09:00)",pattern:"([01]?[0-9]|2[0-3]):[0-5][0-9]",value:w,onChange:m=>S(m.target.value),"data-testid":"input-shoot-time",className:"h-10 font-mono text-sm",maxLength:5,disabled:!r})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsxs(b,{htmlFor:"deliveryDate",className:"text-sm font-semibold",children:[e.jsx(q,{className:"w-4 h-4 inline mr-1.5 -mt-0.5"}),"Delivery Date ",!r&&e.jsx("span",{className:"text-xs text-muted-foreground",children:"(Admin only)"})]}),e.jsx(E,{id:"deliveryDate",type:"date",value:C,onChange:m=>x(m.target.value),"data-testid":"input-delivery-date",className:"h-10 font-mono text-sm",disabled:!r})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsxs(b,{htmlFor:"deliveryTime",className:"text-sm font-semibold",children:[e.jsx(Y,{className:"w-4 h-4 inline mr-1.5 -mt-0.5"}),"Delivery Time ",!r&&e.jsx("span",{className:"text-xs text-muted-foreground",children:"(Admin only)"})]}),e.jsx(E,{id:"deliveryTime",type:"text",placeholder:"HH:MM (e.g., 18:30)",pattern:"([01]?[0-9]|2[0-3]):[0-5][0-9]",value:j,onChange:m=>o(m.target.value),"data-testid":"input-delivery-time",className:"h-10 font-mono text-sm",maxLength:5,disabled:!r})]})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(b,{htmlFor:"notes",className:"text-sm font-semibold",children:"Notes"}),e.jsx(me,{id:"notes",placeholder:"Add any additional notes or details about this project...",value:f,onChange:m=>D(m.target.value),"data-testid":"input-notes",className:"min-h-[80px] resize-y"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsxs(b,{htmlFor:"assignee",className:"text-sm font-semibold",children:["Assigned To ",!r&&e.jsx("span",{className:"text-xs text-muted-foreground",children:"(Admin only)"})]}),e.jsxs(B,{value:g,onValueChange:T,disabled:!r,children:[e.jsx(z,{id:"assignee","data-testid":"select-assignee",className:"h-10",children:e.jsx(U,{placeholder:r?"Select assignee":"—"})}),e.jsx(L,{children:fe.map(m=>e.jsx(P,{value:m,children:m},m))})]})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(b,{htmlFor:"workType",className:"text-sm font-semibold",children:"Είδος Εργασίας"}),e.jsxs(B,{value:I,onValueChange:m=>F(m),children:[e.jsx(z,{id:"workType","data-testid":"select-work-type",className:"h-10",children:e.jsx(U,{})}),e.jsx(L,{children:ga.map(m=>e.jsx(P,{value:m.value,children:m.label},m.value))})]})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(b,{htmlFor:"tag",className:"text-sm font-semibold",children:"Tag"}),e.jsxs(B,{value:V,onValueChange:m=>d(m),children:[e.jsx(z,{id:"tag","data-testid":"select-tag",className:"h-10",children:e.jsx(U,{})}),e.jsx(L,{children:fa.map(m=>e.jsx(P,{value:m,children:m},m))})]})]})]}),e.jsx("div",{className:"flex justify-end",children:e.jsxs(N,{type:"submit",disabled:s,"data-testid":"button-add-task",className:"gap-2",children:[e.jsx(Ns,{className:"w-4 h-4"}),"Add Task"]})})]})})})})}const Et=i.forwardRef(({className:t,...s},a)=>e.jsx("div",{className:"relative w-full overflow-auto",children:e.jsx("table",{ref:a,className:l("w-full caption-bottom text-sm",t),...s})}));Et.displayName="Table";const At=i.forwardRef(({className:t,...s},a)=>e.jsx("thead",{ref:a,className:l("[&_tr]:border-b",t),...s}));At.displayName="TableHeader";const Rt=i.forwardRef(({className:t,...s},a)=>e.jsx("tbody",{ref:a,className:l("[&_tr:last-child]:border-0",t),...s}));Rt.displayName="TableBody";const ja=i.forwardRef(({className:t,...s},a)=>e.jsx("tfoot",{ref:a,className:l("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",t),...s}));ja.displayName="TableFooter";const ge=i.forwardRef(({className:t,...s},a)=>e.jsx("tr",{ref:a,className:l("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",t),...s}));ge.displayName="TableRow";const A=i.forwardRef(({className:t,...s},a)=>e.jsx("th",{ref:a,className:l("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",t),...s}));A.displayName="TableHead";const R=i.forwardRef(({className:t,...s},a)=>e.jsx("td",{ref:a,className:l("p-4 align-middle [&:has([role=checkbox])]:pr-0",t),...s}));R.displayName="TableCell";const ya=i.forwardRef(({className:t,...s},a)=>e.jsx("caption",{ref:a,className:l("mt-4 text-sm text-muted-foreground",t),...s}));ya.displayName="TableCaption";const ba=ce("whitespace-nowrap inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 hover-elevate ",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground shadow-xs",secondary:"border-transparent bg-secondary text-secondary-foreground",destructive:"border-transparent bg-destructive text-destructive-foreground shadow-xs",outline:" border [border-color:var(--badge-outline)] shadow-xs"}},defaultVariants:{variant:"default"}});function le({className:t,variant:s,...a}){return e.jsx("div",{className:l(ba({variant:s}),t),...a})}function Na({status:t,isOverdue:s}){if(s&&t!=="done")return e.jsxs(le,{variant:"destructive",className:"gap-1.5","data-testid":"badge-status-overdue",children:[e.jsx(Y,{className:"w-3 h-3"}),"Overdue"]});const a={todo:{label:"To Do",icon:Y,variant:"secondary",className:""},inprogress:{label:"In Progress",icon:ws,variant:"default",className:""},done:{label:"Done",icon:Ts,variant:"outline",className:"bg-green-100 text-green-800 border-green-300 dark:bg-green-900/30 dark:text-green-400 dark:border-green-800"}},{label:r,icon:n,variant:u,className:h}=a[t];return e.jsxs(le,{variant:u,className:`gap-1.5 ${h}`,"data-testid":`badge-status-${t}`,children:[e.jsx(n,{className:"w-3 h-3"}),r]})}function wa({tasks:t,onUpdateStatus:s,onEdit:a,onDelete:r,userEmail:n}){const u=be(n),[h,k]=i.useState("deliveryDate"),[w,S]=i.useState("asc"),C=[...t].sort((o,f)=>{if(!h)return 0;const D=o[h]||"9999-12-31",g=f[h]||"9999-12-31",T=D.localeCompare(g);return w==="asc"?T:-T}),x=o=>!o.deliveryDate||o.status==="done"?!1:new Date(o.deliveryDate)<new Date,j=o=>{h===o?S(w==="asc"?"desc":"asc"):(k(o),S("asc"))};return t.length===0?e.jsx("div",{className:"text-center py-16 px-4 border rounded-lg","data-testid":"empty-state",children:e.jsxs("div",{className:"max-w-sm mx-auto",children:[e.jsx("div",{className:"w-16 h-16 bg-muted rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(we,{className:"w-8 h-8 text-muted-foreground"})}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No tasks yet"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Create your first task to start managing your film production schedule."})]})}):e.jsx("div",{className:"border rounded-lg overflow-hidden",children:e.jsxs(Et,{children:[e.jsx(At,{children:e.jsxs(ge,{children:[e.jsx(A,{className:"font-semibold",children:"Project"}),e.jsx(A,{className:"font-semibold cursor-pointer hover-elevate",onClick:()=>j("shootDate"),"data-testid":"header-shoot-date",children:"Production Date"}),e.jsx(A,{className:"font-semibold cursor-pointer hover-elevate",onClick:()=>j("deliveryDate"),"data-testid":"header-delivery-date",children:"Delivery"}),e.jsx(A,{className:"font-semibold",children:"Notes"}),e.jsx(A,{className:"font-semibold",children:"Assignee"}),e.jsx(A,{className:"font-semibold",children:"Work Type"}),e.jsx(A,{className:"font-semibold",children:"Status"}),e.jsx(A,{className:"font-semibold",children:"Tag"}),e.jsx(A,{className:"font-semibold text-right",children:"Actions"})]})}),e.jsx(Rt,{children:C.map(o=>{const f=x(o);return e.jsxs(ge,{className:"hover-elevate transition-colors duration-150","data-testid":`task-row-${o.id}`,children:[e.jsx(R,{className:"font-medium",children:o.title}),e.jsx(R,{className:"font-mono text-sm text-muted-foreground",children:o.shootDate||"-"}),e.jsx(R,{className:"font-mono text-sm text-muted-foreground",children:e.jsxs("div",{className:"flex flex-col gap-0.5",children:[e.jsx("span",{children:o.deliveryDate||"-"}),o.deliveryTime&&e.jsx("span",{className:"text-xs",children:o.deliveryTime})]})}),e.jsx(R,{className:"text-sm text-muted-foreground max-w-[200px]",children:o.notes?e.jsx("span",{className:"line-clamp-2",title:o.notes,children:o.notes}):"-"}),e.jsx(R,{children:o.assignee}),e.jsx(R,{children:o.workType==="shoot"?"Γύρισμα":o.workType==="edit"?"Μοντάζ":"Φόρτωμα"}),e.jsx(R,{children:e.jsxs(B,{value:o.status,onValueChange:D=>s(o.id,D),children:[e.jsx(z,{className:"w-[140px] h-8 border-0 focus:ring-0 px-0","data-testid":`select-status-${o.id}`,children:e.jsx(U,{asChild:!0,children:e.jsx(Na,{status:o.status,isOverdue:f})})}),e.jsxs(L,{children:[e.jsx(P,{value:"todo",children:"To Do"}),e.jsx(P,{value:"inprogress",children:"In Progress"}),e.jsx(P,{value:"done",children:"Done"})]})]})}),e.jsx(R,{children:e.jsx(le,{variant:"outline",className:`font-mono text-xs ${o.tag==="newsit"?"bg-black text-white border-black dark:bg-black dark:text-white dark:border-white":o.tag==="zappit"?"bg-purple-500 text-white border-purple-500 dark:bg-purple-600 dark:text-white dark:border-purple-400":"bg-pink-500 text-white border-pink-500 dark:bg-pink-600 dark:text-white dark:border-pink-400"}`,"data-testid":`badge-tag-${o.id}`,children:o.tag})}),e.jsx(R,{className:"text-right",children:e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[e.jsx(N,{variant:"ghost",size:"icon",onClick:()=>a(o),"data-testid":`button-edit-${o.id}`,"aria-label":"Edit task",children:e.jsx(we,{className:"w-4 h-4"})}),u&&e.jsx(N,{variant:"ghost",size:"icon",onClick:()=>r(o.id),"data-testid":`button-delete-${o.id}`,"aria-label":"Delete task",children:e.jsx(Ds,{className:"w-4 h-4"})})]})})]},o.id)})})]})})}function Ta({tasks:t}){const s=new Map,a=new Date;return t.forEach(r=>{if(!r.assignee)return;const n=s.get(r.assignee)||{tasks:0,overdue:0};n.tasks+=1,r.deliveryDate&&r.status!=="done"&&new Date(r.deliveryDate)<a&&(n.overdue+=1),s.set(r.assignee,n)}),s.size===0?null:e.jsxs(O,{children:[e.jsx(oe,{children:e.jsx(de,{className:"text-lg font-semibold",children:"Εργασίες Ομάδας"})}),e.jsx($,{children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:Array.from(s.entries()).map(([r,n])=>e.jsxs("div",{className:"p-4 border rounded-lg hover-elevate transition-colors duration-150","data-testid":`workload-card-${r}`,children:[e.jsx("div",{className:"font-semibold mb-3",children:r}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Tasks"}),e.jsx("span",{className:"font-mono font-semibold","data-testid":`workload-tasks-${r}`,children:n.tasks})]}),n.overdue>0&&e.jsxs("div",{className:"flex items-center gap-1.5 text-destructive pt-1",children:[e.jsx(Ss,{className:"w-4 h-4"}),e.jsxs("span",{className:"font-semibold","data-testid":`workload-overdue-${r}`,children:[n.overdue," overdue"]})]})]})]},r))})})]})}const Da=Cs,Sa=Is,_t=i.forwardRef(({className:t,...s},a)=>e.jsx(ot,{ref:a,className:l("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...s}));_t.displayName=ot.displayName;const Pt=i.forwardRef(({className:t,children:s,...a},r)=>e.jsxs(Sa,{children:[e.jsx(_t,{}),e.jsxs(dt,{ref:r,className:l("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...a,children:[s,e.jsxs(ks,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[e.jsx(Pe,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));Pt.displayName=dt.displayName;const Ft=({className:t,...s})=>e.jsx("div",{className:l("flex flex-col space-y-1.5 text-center sm:text-left",t),...s});Ft.displayName="DialogHeader";const Mt=i.forwardRef(({className:t,...s},a)=>e.jsx(lt,{ref:a,className:l("text-lg font-semibold leading-none tracking-tight",t),...s}));Mt.displayName=lt.displayName;const ka=i.forwardRef(({className:t,...s},a)=>e.jsx(ct,{ref:a,className:l("text-sm text-muted-foreground",t),...s}));ka.displayName=ct.displayName;const Ia=["Δημήτρης","Γιάννης","Βασιλική"],Ca=["newsit","tlife","zappit"],Ea=[{value:"shoot",label:"Γύρισμα"},{value:"edit",label:"Μοντάζ"},{value:"upload",label:"Φόρτωμα"}];function Aa({task:t,open:s,onOpenChange:a,onSave:r,isPending:n,userEmail:u}){const[h,k]=i.useState(""),[w,S]=i.useState(""),[C,x]=i.useState(""),[j,o]=i.useState(""),[f,D]=i.useState(""),[g,T]=i.useState(""),[I,F]=i.useState(""),[V,d]=i.useState("shoot"),[y,m]=i.useState("tlife"),v=be(u);i.useEffect(()=>{if(t){k(t.title),S(t.shootDate||""),x(t.shootTime||""),o(t.deliveryDate||""),D(t.deliveryTime||""),T(t.notes||""),F(t.assignee||"");const c=t.workType;d(c||"shoot");const M=t.tag;m(M||"tlife")}},[t]);const H=c=>{if(c.preventDefault(),!t)return;const M={title:h,shootDate:w||null,notes:g||null,workType:V,tag:y};v&&(M.assignee=I,M.shootTime=C||null,M.deliveryDate=j||null,M.deliveryTime=f||null),r(t.id,M)};return e.jsx(Da,{open:s,onOpenChange:a,children:e.jsxs(Pt,{className:"sm:max-w-[500px]","data-testid":"dialog-edit-task",children:[e.jsx(Ft,{children:e.jsx(Mt,{children:"Edit Task"})}),e.jsx("form",{onSubmit:H,children:e.jsxs("div",{className:"grid gap-6 py-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(b,{htmlFor:"edit-title",className:"text-sm font-semibold",children:"Project Title"}),e.jsx(E,{id:"edit-title",value:h,onChange:c=>k(c.target.value),required:!0,"data-testid":"input-edit-title",className:"h-10"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsxs(b,{htmlFor:"edit-shootDate",className:"text-sm font-semibold",children:[e.jsx(q,{className:"w-4 h-4 inline mr-1.5 -mt-0.5"}),"Production Date"]}),e.jsx(E,{id:"edit-shootDate",type:"date",value:w,onChange:c=>S(c.target.value),"data-testid":"input-edit-shoot-date",className:"h-10 font-mono text-sm"})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsxs(b,{htmlFor:"edit-shootTime",className:"text-sm font-semibold",children:[e.jsx(Y,{className:"w-4 h-4 inline mr-1.5 -mt-0.5"}),"Production Time ",!v&&e.jsx("span",{className:"text-xs text-muted-foreground",children:"(Admin only)"})]}),e.jsx(E,{id:"edit-shootTime",type:"text",placeholder:"HH:MM (e.g., 09:00)",pattern:"([01]?[0-9]|2[0-3]):[0-5][0-9]",value:C,onChange:c=>x(c.target.value),"data-testid":"input-edit-shoot-time",className:"h-10 font-mono text-sm",maxLength:5,disabled:!v})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsxs(b,{htmlFor:"edit-deliveryDate",className:"text-sm font-semibold",children:[e.jsx(q,{className:"w-4 h-4 inline mr-1.5 -mt-0.5"}),"Delivery Date ",!v&&e.jsx("span",{className:"text-xs text-muted-foreground",children:"(Admin only)"})]}),e.jsx(E,{id:"edit-deliveryDate",type:"date",value:j,onChange:c=>o(c.target.value),"data-testid":"input-edit-delivery-date",className:"h-10 font-mono text-sm",disabled:!v})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsxs(b,{htmlFor:"edit-deliveryTime",className:"text-sm font-semibold",children:[e.jsx(Y,{className:"w-4 h-4 inline mr-1.5 -mt-0.5"}),"Delivery Time ",!v&&e.jsx("span",{className:"text-xs text-muted-foreground",children:"(Admin only)"})]}),e.jsx(E,{id:"edit-deliveryTime",type:"text",placeholder:"HH:MM (e.g., 18:30)",pattern:"([01]?[0-9]|2[0-3]):[0-5][0-9]",value:f,onChange:c=>D(c.target.value),"data-testid":"input-edit-delivery-time",className:"h-10 font-mono text-sm",maxLength:5,disabled:!v})]})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(b,{htmlFor:"edit-notes",className:"text-sm font-semibold",children:"Notes"}),e.jsx(me,{id:"edit-notes",placeholder:"Add any additional notes or details about this project...",value:g,onChange:c=>T(c.target.value),"data-testid":"input-edit-notes",className:"min-h-[80px] resize-y"})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsxs(b,{htmlFor:"edit-assignee",className:"text-sm font-semibold",children:["Assigned To ",!v&&e.jsx("span",{className:"text-xs text-muted-foreground",children:"(Admin only)"})]}),e.jsxs(B,{value:I,onValueChange:F,disabled:!v,children:[e.jsx(z,{id:"edit-assignee","data-testid":"select-edit-assignee",className:"h-10",children:e.jsx(U,{placeholder:"—"})}),e.jsx(L,{children:Ia.map(c=>e.jsx(P,{value:c,children:c},c))})]})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(b,{htmlFor:"edit-workType",className:"text-sm font-semibold",children:"Είδος Εργασίας"}),e.jsxs(B,{value:V,onValueChange:c=>d(c),children:[e.jsx(z,{id:"edit-workType","data-testid":"select-edit-work-type",className:"h-10",children:e.jsx(U,{})}),e.jsx(L,{children:Ea.map(c=>e.jsx(P,{value:c.value,children:c.label},c.value))})]})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(b,{htmlFor:"edit-tag",className:"text-sm font-semibold",children:"Tag"}),e.jsxs(B,{value:y,onValueChange:c=>m(c),children:[e.jsx(z,{id:"edit-tag","data-testid":"select-edit-tag",className:"h-10",children:e.jsx(U,{})}),e.jsx(L,{children:Ca.map(c=>e.jsx(P,{value:c,children:c},c))})]})]})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-2",children:[e.jsx(N,{type:"button",variant:"outline",onClick:()=>a(!1),"data-testid":"button-cancel-edit",children:"Cancel"}),e.jsx(N,{type:"submit",disabled:n,"data-testid":"button-save-edit",children:"Save Changes"})]})]})})]})})}function Ra({tasks:t,onTaskClick:s}){const[a,r]=i.useState(new Date),n=Yt(a),u=Gt(a),h=Jt(n,{weekStartsOn:1}),k=Xt(u,{weekStartsOn:1}),w=Zt({start:h,end:k}),S=x=>t.filter(j=>{const o=j.shootDate?ee(j.shootDate):null,f=j.deliveryDate?ee(j.deliveryDate):null;return o&&G(o,x)||f&&G(f,x)}),C=(x,j)=>{const o=x.shootDate?ee(x.shootDate):null,f=x.deliveryDate?ee(x.deliveryDate):null;return o&&G(o,j)?"shoot":f&&G(f,j)?"delivery":null};return e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-lg font-semibold",children:xe(a,"MMMM yyyy")}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(N,{variant:"outline",size:"icon",onClick:()=>r(es(a,1)),"data-testid":"button-prev-month",children:e.jsx(Es,{className:"w-4 h-4"})}),e.jsx(N,{variant:"outline",onClick:()=>r(new Date),"data-testid":"button-today",children:"Today"}),e.jsx(N,{variant:"outline",size:"icon",onClick:()=>r(ts(a,1)),"data-testid":"button-next-month",children:e.jsx(Be,{className:"w-4 h-4"})})]})]}),e.jsxs("div",{className:"grid grid-cols-7 gap-px bg-border rounded-md overflow-hidden",children:[["Δευτέρα","Τρίτη","Τετάρτη","Πέμπτη","Παρασκευή","Σάββατο","Κυριακή"].map(x=>e.jsx("div",{className:"bg-muted p-2 text-center text-xs font-semibold text-muted-foreground",children:x},x)),w.map((x,j)=>{const o=S(x),f=ss(x,a),D=G(x,new Date);return e.jsxs("div",{className:`bg-background min-h-[100px] p-2 ${f?"":"opacity-40"} ${D?"bg-accent/20":""}`,"data-testid":`calendar-day-${xe(x,"yyyy-MM-dd")}`,children:[e.jsx("div",{className:`text-xs font-mono mb-1 ${D?"font-bold text-primary":"text-muted-foreground"}`,children:xe(x,"d")}),e.jsx("div",{className:"space-y-1",children:o.map(g=>{const T=C(g,x),I=g.status==="done",F=I?"w-full justify-start text-xs truncate gap-1 no-default-hover-elevate no-default-active-elevate bg-green-100 text-green-800 border-green-300 dark:bg-green-900/30 dark:text-green-400 dark:border-green-800":"w-full justify-start text-xs truncate gap-1 no-default-hover-elevate no-default-active-elevate";return e.jsx("button",{onClick:()=>s(g),className:"w-full text-left hover-elevate active-elevate-2 rounded-sm","data-testid":`calendar-task-${g.id}`,children:e.jsxs(le,{variant:I?"outline":T==="shoot"?"default":"secondary",className:F,children:[T==="shoot"?e.jsx(Te,{className:"w-3 h-3 shrink-0"}):e.jsx(De,{className:"w-3 h-3 shrink-0"}),e.jsxs("span",{className:"truncate flex-1",children:[T==="delivery"&&g.deliveryTime&&e.jsx("span",{className:"font-mono mr-1",children:g.deliveryTime}),g.title]}),e.jsx("span",{className:`text-[10px] font-semibold ml-1 shrink-0 px-1 py-0.5 rounded ${g.tag==="newsit"?"bg-black text-white dark:bg-black dark:text-white":g.tag==="zappit"?"bg-purple-500 text-white dark:bg-purple-600 dark:text-white":"bg-pink-500 text-white dark:bg-pink-600 dark:text-white"}`,children:g.tag})]})},`${g.id}-${T}`)})})]},j)})]}),e.jsxs("div",{className:"flex gap-4 mt-4 text-xs text-muted-foreground",children:[e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx(Te,{className:"w-3 h-3"}),e.jsx("span",{children:"Production Date"})]}),e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx(De,{className:"w-3 h-3"}),e.jsx("span",{children:"Delivery Date"})]})]})]})}function re(t){return/^401: .*Unauthorized/.test(t.message)}function _a(){const{user:t}=jt(),{toast:s}=ve(),[a,r]=i.useState(null),[n,u]=i.useState(!1),[h,k]=i.useState("table"),[w,S]=i.useState(""),C=async()=>{try{await aa()}finally{_.removeQueries({queryKey:["/api/auth/user"]}),_.removeQueries({queryKey:["/api/tasks"]}),window.location.href="/"}},{data:x=[],isLoading:j}=Ce({queryKey:["/api/tasks"]}),o=te({mutationFn:async d=>await ae("POST","/api/tasks",d),onSuccess:()=>{_.invalidateQueries({queryKey:["/api/tasks"]}),s({title:"Task created",description:"Your task has been added successfully."})},onError:d=>{if(re(d)){s({title:"Unauthorized",description:"You are logged out. Logging in again...",variant:"destructive"}),setTimeout(()=>{window.location.href="/"},500);return}s({title:"Error",description:"Failed to create task. Please try again.",variant:"destructive"})}}),f=te({mutationFn:async({id:d,updates:y})=>await ae("PATCH",`/api/tasks/${d}`,y),onSuccess:()=>{_.invalidateQueries({queryKey:["/api/tasks"]}),u(!1),r(null),s({title:"Task updated",description:"Your changes have been saved."})},onError:d=>{if(re(d)){s({title:"Unauthorized",description:"You are logged out. Logging in again...",variant:"destructive"}),setTimeout(()=>{window.location.href="/"},500);return}s({title:"Error",description:"Failed to update task. Please try again.",variant:"destructive"})}}),D=te({mutationFn:async d=>await ae("DELETE",`/api/tasks/${d}`),onSuccess:()=>{_.invalidateQueries({queryKey:["/api/tasks"]}),s({title:"Task deleted",description:"The task has been removed."})},onError:d=>{var y,m;if(re(d)){s({title:"Unauthorized",description:"You are logged out. Logging in again...",variant:"destructive"}),setTimeout(()=>{window.location.href="/"},500);return}if((y=d.message)!=null&&y.includes("404")||(m=d.message)!=null&&m.includes("not found")){_.invalidateQueries({queryKey:["/api/tasks"]}),s({title:"Task deleted",description:"The task was already removed."});return}s({title:"Error",description:"Failed to delete task. Please try again.",variant:"destructive"})}}),g=()=>{const d=c=>c==="shoot"?"Γύρισμα":c==="edit"?"Μοντάζ":c==="upload"?"Φόρτωμα":"Γύρισμα",y=x.map(c=>({Title:c.title,"Production Date":c.shootDate||"","Delivery Date":c.deliveryDate||"","Delivery Time":c.deliveryTime||"",Assignee:c.assignee,"Work Type":d(c.workType),Status:c.status,Tag:c.tag,Notes:c.notes||""})),m=se.json_to_sheet(y),v=se.book_new();se.book_append_sheet(v,m,"Tasks");const H=`athenai-tasks-${new Date().toISOString().split("T")[0]}.xlsx`;Os(v,H),s({title:"Export successful",description:"Your tasks have been exported to Excel."})},T=()=>{const d=document.createElement("input");d.type="file",d.accept=".xlsx, .xls",d.onchange=async y=>{var v;const m=(v=y.target.files)==null?void 0:v[0];if(m)try{const H=await m.arrayBuffer(),c=$s(H,{type:"array"}),M=c.SheetNames[0],Ot=c.Sheets[M],Z=se.sheet_to_json(Ot);if(!Array.isArray(Z)||Z.length===0)throw new Error("Invalid Excel format");const $t=p=>{if(!p)return"shoot";const W=String(p).toLowerCase();return W.includes("γύρισμα")||W==="shoot"?"shoot":W.includes("μοντάζ")||W==="edit"?"edit":W.includes("φόρτωμα")||W==="upload"?"upload":"shoot"};for(const p of Z)await o.mutateAsync({title:p.Title||p.title,shootDate:p["Production Date"]||p["Shoot Date"]||p.shootDate||null,deliveryDate:p["Delivery Date"]||p.deliveryDate||null,deliveryTime:p["Delivery Time"]||p.deliveryTime||null,notes:p.Notes||p.notes||null,assignee:p.Assignee||p.assignee,workType:$t(p["Work Type"]||p.workType),status:p.Status||p.status||"todo",tag:p.Tag||p.tag||"tlife"});s({title:"Import successful",description:`Imported ${Z.length} tasks.`})}catch{s({title:"Import failed",description:"Invalid file format. Please check your Excel file.",variant:"destructive"})}},d.click()},I=te({mutationFn:async d=>await(await ae("POST","/api/tasks/ai-generate",{scheduleText:d})).json(),onSuccess:d=>{_.invalidateQueries({queryKey:["/api/tasks"]}),S(""),s({title:"Tasks created",description:`${d.length} task(s) created successfully from your schedule.`})},onError:d=>{if(re(d)){s({title:"Unauthorized",description:"You are logged out. Logging in again...",variant:"destructive"}),setTimeout(()=>{window.location.href="/"},500);return}console.error("AI generation error:",d),s({title:"Error",description:d.message||"Failed to generate tasks. Please try again.",variant:"destructive"})}}),F=()=>{if(!w.trim()){s({title:"Empty input",description:"Please enter your weekly schedule.",variant:"destructive"});return}I.mutate(w)},V=()=>{if(!t)return"U";const d=t.firstName||"",y=t.lastName||"";return`${d.charAt(0)}${y.charAt(0)}`.toUpperCase()||"U"};return e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsx("header",{className:"border-b sticky top-0 bg-background z-50",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-6 md:px-8 h-16 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-8 h-8 bg-primary rounded-md flex items-center justify-center",children:e.jsx(q,{className:"w-5 h-5 text-primary-foreground"})}),e.jsx("h1",{className:"text-xl font-bold tracking-tight",children:"athenai.gr"})]}),e.jsxs(na,{children:[e.jsx(oa,{asChild:!0,children:e.jsxs(N,{variant:"ghost",className:"h-9 gap-2 px-2","data-testid":"button-user-menu",children:[e.jsxs(bt,{className:"h-8 w-8",children:[e.jsx(Nt,{src:(t==null?void 0:t.profileImageUrl)||void 0,alt:(t==null?void 0:t.email)||"User"}),e.jsx(wt,{className:"text-xs",children:V()})]}),e.jsx("span",{className:"text-sm hidden md:inline-block",children:(t==null?void 0:t.email)||"User"})]})}),e.jsxs(Tt,{align:"end",className:"w-56",children:[e.jsx(St,{children:e.jsxs("div",{className:"flex flex-col space-y-1",children:[e.jsx("p",{className:"text-sm font-medium",children:t!=null&&t.firstName||t!=null&&t.lastName?`${t.firstName||""} ${t.lastName||""}`.trim():"User"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:(t==null?void 0:t.email)||""})]})}),e.jsx(kt,{}),e.jsxs(Dt,{onSelect:d=>{d.preventDefault(),C()},className:"cursor-pointer","data-testid":"button-logout",children:[e.jsx(As,{className:"mr-2 h-4 w-4"}),"Log out"]})]})]})]})}),e.jsxs("main",{className:"max-w-7xl mx-auto px-6 md:px-8 py-6 md:py-8",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h2",{className:"text-2xl md:text-3xl font-bold tracking-tight mb-2",children:"Πρόγραμμα Παραγωγής"}),e.jsx("p",{className:"text-muted-foreground",children:"Οργάνωσε τις εργασίες και τη ροή της ομάδας παραγωγής σου"})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs(O,{children:[e.jsx(oe,{children:e.jsxs(de,{className:"text-lg font-semibold flex items-center gap-2",children:[e.jsx(Se,{className:"w-5 h-5 text-primary"}),"Φτιάξε πρόγραμμα με AI"]})}),e.jsxs($,{className:"space-y-4",children:[e.jsx(me,{placeholder:'π.χ. "Τρίτη γύρισμα TLIFE με Δημήτρη, παράδοση Πέμπτη"',value:w,onChange:d=>S(d.target.value),className:"min-h-24","data-testid":"input-ai-schedule"}),e.jsxs(N,{onClick:F,disabled:I.isPending||!w.trim(),className:"gap-2","data-testid":"button-ai-generate",children:[e.jsx(Se,{className:"w-4 h-4"}),I.isPending?"Επεξεργασία...":"Φτιάξε το πρόγραμμα με AI"]})]})]}),e.jsxs(O,{children:[e.jsxs(oe,{className:"flex flex-row items-center justify-between gap-4 space-y-0 pb-4",children:[e.jsx(de,{className:"text-lg font-semibold",children:"Tasks"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("div",{className:"flex rounded-md border",children:[e.jsx(N,{variant:h==="table"?"default":"ghost",size:"icon",onClick:()=>k("table"),"data-testid":"button-view-table",className:"rounded-r-none",children:e.jsx(Rs,{className:"w-4 h-4"})}),e.jsx(N,{variant:h==="calendar"?"default":"ghost",size:"icon",onClick:()=>k("calendar"),"data-testid":"button-view-calendar",className:"rounded-l-none",children:e.jsx(_s,{className:"w-4 h-4"})})]}),e.jsxs(N,{variant:"outline",onClick:g,disabled:x.length===0,"data-testid":"button-export",className:"gap-2",children:[e.jsx(Ps,{className:"w-4 h-4"}),"Export"]}),e.jsxs(N,{variant:"outline",onClick:T,"data-testid":"button-import",className:"gap-2",children:[e.jsx(Fs,{className:"w-4 h-4"}),"Import"]})]})]}),e.jsx($,{children:j?e.jsx("div",{className:"text-center py-12 text-muted-foreground",children:"Loading tasks..."}):h==="table"?e.jsx(wa,{tasks:x,onUpdateStatus:(d,y)=>f.mutate({id:d,updates:{status:y}}),onEdit:d=>{r(d),u(!0)},onDelete:d=>D.mutate(d),userEmail:t==null?void 0:t.email}):e.jsx(Ra,{tasks:x,onTaskClick:d=>{r(d),u(!0)}})})]}),x.length>0&&e.jsx(Ta,{tasks:x}),e.jsx(va,{onSubmit:d=>o.mutate(d),isPending:o.isPending,userEmail:t==null?void 0:t.email})]})]}),e.jsx(Aa,{task:a,open:n,onOpenChange:u,onSave:(d,y)=>f.mutate({id:d,updates:y}),isPending:f.isPending,userEmail:t==null?void 0:t.email})]})}function Pa(){return e.jsx("div",{className:"min-h-screen w-full flex items-center justify-center bg-gray-50",children:e.jsx(O,{className:"w-full max-w-md mx-4",children:e.jsxs($,{className:"pt-6",children:[e.jsxs("div",{className:"flex mb-4 gap-2",children:[e.jsx(Ms,{className:"h-8 w-8 text-red-500"}),e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"404 Page Not Found"})]}),e.jsx("p",{className:"mt-4 text-sm text-gray-600",children:"Did you forget to add the page to the router?"})]})})})}function Fa(){const{isAuthenticated:t,isLoading:s}=jt();return s?e.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-8 h-8 border-2 border-primary border-t-transparent rounded-full animate-spin mx-auto mb-4"}),e.jsx("p",{className:"text-muted-foreground text-sm",children:"Loading..."})]})}):e.jsxs(Wt,{children:[t?e.jsx(e.Fragment,{children:e.jsx(ue,{path:"/",component:_a})}):e.jsx(ue,{path:"/",component:ia}),e.jsx(ue,{component:Pa})]})}function Ma(){return i.useEffect(()=>{const t=ra(()=>{_.invalidateQueries({queryKey:["/api/auth/user"]})});return()=>t()},[]),e.jsx(as,{client:_,children:e.jsxs(Ys,{children:[e.jsx(Qs,{}),e.jsx(Fa,{})]})})}zt(document.getElementById("root")).render(e.jsx(Ma,{}));
